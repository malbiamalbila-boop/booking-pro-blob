import { NextResponse } from "next/server"; import ical from "node-ical"; export const runtime="nodejs";
export async function GET(){ const url=process.env.GOOGLE_ICS_URL||"https://calendar.google.com/calendar/ical/a91ca23a00aa1fd48bea4c14b2ad27ab5b088e72b5438364299ab6cd66f302ed%40group.calendar.google.com/public/basic.ics"; const data=await ical.async.fromURL(url); const events:any[]=[]; for(const k of Object.keys(data)){ const e:any=(data as any)[k]; if(e.type==="VEVENT"){ events.push({ id:e.uid||k, title:e.summary||"Event", start:e.start, end:e.end, location:e.location||null, url:e.url||null, source:"google" }); } } return NextResponse.json(events); }
